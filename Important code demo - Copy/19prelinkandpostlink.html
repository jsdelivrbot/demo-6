<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>19</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>
<body ng-app="myApp">
    <level-one>
        <level-two>
            <level-three>
                Hello {{name}}
            </level-three>
        </level-two>
    </level-one>

<script>
    var app = angular.module('myApp', []);
    function createDirective(name) {
        return function () {
            return {
                restrict: 'E',
                compile: function (tElem, tAttrs) {
                    console.log(name + ': compile');
                    return {
                        pre: function (scope, iElem, attrs) {
                            console.log(name + ': pre link');
                        },
                        post: function (scope, iElem, attrs) {
                            console.log(name + ': post link');
                        }
                    }
                }
            }
        }
    }
    app.directive('levelOne', createDirective('level-One'));
    app.directive('levelTwo', createDirective('level-Two'));
    app.directive('levelThree', createDirective('level-Three'));
</script>
</body>
</html>