<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>customDirective--require</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>
<body>
<div ng-app="myApp">
    <div ng-controller="myCtrl">
        <div book-list></div>
    </div>
</div>
<script>
    angular.module('myApp', [])
        .directive('bookList', function () {
            return {
                restrict: 'ECAM',
                controller: function ($scope) {
                    console.log($scope);
                    $scope.books = [
                        {name: 'HTML'},
                        {name: 'CSS'},
                        {name: 'Javascipt'}
                    ];
                    this.addBook = function () {
                        $scope.$apply(function () {
                            $scope.books.push({
                                name: 'Angularjs'
                            })
                        });
                    }
                },
                controllerAs: 'bookListController',
                template: '<div><ul><li ng-repeat="book in books">' +
                '{{book.name}}</li></ul><book-add></book-add></div>',
                replace: true
            }
        })
        .directive('bookAdd', function () {
            return {
                restrict: 'ECAM',
                require: '^bookList',
                template: '<button type="button">Adding</button>',
                replace: true,
                link: function (scope, iElement, iAttrs, bookListController) {
                    iElement.on('click', bookListController.addBook);
                }
            }
        })
        .controller('myCtrl', ['$scope', function ($scope) {
            //console.log($scope);
        }]);
</script>
</body>
</html>